<?php

use Application\Entity\Db\These;
use Application\Entity\Db\Acteur;
use Application\Entity\Db\Doctorant;
use Application\Entity\Db\Individu;
use Application\View\Renderer\PhpRenderer;

/**
 * @var PhpRenderer             $this
 * @var These                   $these
 * @var array(string=>string)   $logos
 * @var array(string=>string)   $infos
 * @var array(string=>string)   $encadrements
 * @var array(array)            $jury
 * @var []                      $informations
 *
 * @see \Application\Service\Fichier\FichierService::fetchInformationsPageDeCouverture() pour la génération de $informations
 */



$PATH = "/var/sygal-files";
?>

<!-- SECTION DU LOGO DE LA COMUE -------------------------------------------------------------------------------------->
<div style="text-align: center; margin-bottom: 30px;">
    <div class='logo-comue'>
        <?php if ($informations["logo-comue"] !== null): ?>
            <img src="<?php echo $PATH . $informations["logo-comue"]; ?>"/>
        <?php else: ?>
            <span style='background-color:red;'> COMUE ou logo de la COMUE non renseigné. </span>
        <?php endif; ?>
    </div>
</div>

<!-- ENTETE DE LA PAGE DE COUVERTURE ---------------------------------------------------------------------------------->
<div class='bandeau-these'>
    THÈSE
</div>

<div class='infos-diplome'>
    <span class='larger-infos'>Pour obtenir le diplôme de doctorat </span>
    <br/>

    Spécialité
    <?php if ($informations["specialité"] !== null): ?>
        <?php echo $informations["specialité"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> non renseignée </span>
    <?php endif; ?>
    <br/>

    Préparé au sein de l'
    <?php if ($informations["etablissement"] !== null): ?>
        <?php echo $informations["etablissement"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> non renseigné </span>
    <?php endif; ?>
    <br/>

<!-- TODO COTUTELLE -->
<!--    //Preparation des champs associés à la cotutelle-->
<!--    if ($these->getLibelleEtabCotutelle() !== null && $these->getLibellePaysCotutelle() === null) {-->
<!--    $texte .= "En cotutelle avec " . $these->getLibelleEtabCotutelle() . "<br/>";-->
<!--    }-->
<!--    if ($these->getLibelleEtabCotutelle() !== null && $these->getLibellePaysCotutelle() !== null) {-->
<!--    $texte .= "En cotutelle internationale de thèse avec " . $these->getLibelleEtabCotutelle() .", ". $these->getLibellePaysCotutelle() . "<br/>";-->
<!--    }-->
</div>


<div class='bandeau-titre'>
    <?php if ($informations["titre"] !== null): ?>
        <?php echo $informations["titre"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> Aucun titre </span>
    <?php endif; ?>
    <br/>
</div>

<div class='infos-doctorant' style=''>
    Présentée et soutenue par <br/>
    <?php if ($informations["doctorant"] !== null): ?>
        <?php echo $informations["doctorant"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> Aucun doctorant </span>
    <?php endif; ?>
</div>

<!-- SECTION JURY ----------------------------------------------------------------------------------------------------->

<table class='jury'>
    <tr>
        <th colspan='3'>
            Thèse soutenue publiquement le
            <?php if ($informations["date de soutenance"] !== null): ?>
                <?php echo $informations["date de soutenance"]; ?>
            <?php else: ?>
                <span style='background-color:red;'> Aucune date </span>
            <?php endif; ?>
            <br/>
            devant le jury composé de
        </th>
    </tr>

    <?php
        $nbMembres = $informations["nombre de membres"] + $informations["nombre de rapporteurs"] + $informations["nombre de directeurs"];
        for($position = 1 ; $position <= $nbMembres; $position++):
    ?>
            <tr>
                <td> <?php echo $informations["nom ".$position]; ?> </td>
                <td> <?php echo $informations["qualité ".$position]; ?>, <?php echo $informations["etablissement ".$position]; ?> </td>
                <td> <?php echo $informations["role ".$position]; ?> </td>
            </tr>
    <?php endfor; ?>

</table>


<!-- SECTION ENCADREMENT ---------------------------------------------------------------------------------------------->
<div class='infos-encadrement'>
    Thèse dirigée par
    <?php if ($informations["liste des directeurs"] !== null): ?>
        <?php echo $informations["liste des directeurs"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> non renseigné </span>
    <?php endif; ?>
,
    <?php if ($informations["Unité de recherche"] !== null): ?>
        <?php echo $informations["Unité de recherche"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> unité de recherche non renseignée </span>
    <?php endif; ?>
</div>

<!-- SECTION DES LOGOS EN BAS DE PAGE --------------------------------------------------------------------------------->
<div class="logos">
<table style="border:none;" class="logos">
    <tr>
        <td>
            <?php if ($informations["logo-etablissement"]): ?>
                <img class="logo_small" src="<?php echo $PATH . $informations["logo-etablissement"]; ?>"/>
            <?php else: ?>
                <span style='background-color:red;'> Établissement d'inscription ou logo d'établissement non renseigné. </span>
            <?php endif; ?>
        </td>
        <!-- TODO COTUTELLE -->
        <td>
            <?php if ($informations["logo-ecoleDoctorale"]): ?>
                <img class="logo_small" src="<?php echo $PATH . ($informations["logo-ecoleDoctorale"]); ?>"/>
            <?php else: ?>
                <span style='background-color:red;'> École doctorale ou logo d'école doctorale non renseigné </span>
            <?php endif; ?>
        </td>
        <td>
            <?php if ($informations["logo-uniteRecherche"]): ?>
                <img class="logo_small" src="<?php echo $PATH . ($informations["logo-uniteRecherche"]); ?>"/>
            <?php else: ?>
                <span style='background-color:red;'> Unité de recherche ou logo d'unité de recherche non renseigné </span>
            <?php endif; ?>
        </td>
    </tr>
</table>
</div>