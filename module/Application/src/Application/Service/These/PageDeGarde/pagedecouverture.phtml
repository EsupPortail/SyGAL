<?php

use Application\Entity\Db\These;
use Application\Entity\Db\Acteur;
use Application\Entity\Db\Doctorant;
use Application\Entity\Db\Individu;
use Application\View\Renderer\PhpRenderer;
use Application\Service\Notification\NotificationService;

/**
 * @var PhpRenderer             $this
 * @var These                   $these
 * @var array(string=>string)   $logos
 * @var array(string=>string)   $infos
 * @var array(string=>string)   $encadrements
 * @var array(array)            $jury
 * @var NotificationService     $notifier
 *
 *
 */

$PATH = "/var/sygal-files";
?>

<!-- SECTION DU LOGO DE LA COMUE -------------------------------------------------------------------------------------->
<div style="text-align: center; margin-bottom: 30px;">
    <div class='logo-comue'>
        <?php if ($logos["comue"] !== null): ?>
            <img src="<?php echo $PATH . $logos["comue"]; ?>"/>
        <?php else: ?>
            <span style='background-color:red;'> COMUE ou logo de la COMUE non renseigné. </span>
        <?php endif; ?>
    </div>
</div>

<!-- ENTETE DE LA PAGE DE COUVERTURE ---------------------------------------------------------------------------------->
<div class='bandeau-these'>
    THÈSE
</div>

<div class='infos-diplome'>
    <span class='larger-infos'>Pour obtenir le diplôme de doctorat </span>
    <br/>

    Spécialité
    <?php if ($infos["specialite"] !== null): ?>
        <?php echo $infos["specialite"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> non renseignée </span>
    <?php endif; ?>
    <br/>

    Préparé au sein de l'
    <?php if ($infos["etablissement"] !== null): ?>
        <?php echo $infos["etablissement"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> non renseigné </span>
    <?php endif; ?>
    <br/>

<!-- TODO COTUTELLE -->
<!--    //Preparation des champs associés à la cotutelle-->
<!--    if ($these->getLibelleEtabCotutelle() !== null && $these->getLibellePaysCotutelle() === null) {-->
<!--    $texte .= "En cotutelle avec " . $these->getLibelleEtabCotutelle() . "<br/>";-->
<!--    }-->
<!--    if ($these->getLibelleEtabCotutelle() !== null && $these->getLibellePaysCotutelle() !== null) {-->
<!--    $texte .= "En cotutelle internationale de thèse avec " . $these->getLibelleEtabCotutelle() .", ". $these->getLibellePaysCotutelle() . "<br/>";-->
<!--    }-->
</div>


<div class='bandeau-titre'>
    <?php if ($infos["titre"] !== null): ?>
        <?php echo $infos["titre"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> Aucun titre </span>
    <?php endif; ?>
    <br/>
</div>

<div class='infos-doctorant' style=''>
    Présentée et soutenue par <br/>
    <?php if ($infos["doctorant"] !== null): ?>
        <?php echo $infos["doctorant"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> Aucun doctorant </span>
    <?php endif; ?>
</div>

<!-- SECTION JURY ----------------------------------------------------------------------------------------------------->

<table class='jury'>
    <tr>
        <th colspan='3'>
            Thèse soutenue publiquement le
            <?php if ($infos["date"] !== null): ?>
                <?php echo $infos["date"]; ?>
            <?php else: ?>
                <span style='background-color:red;'> Aucune date </span>
            <?php endif; ?>
            <br/>
            devant le jury composé de
        </th>
    </tr>
    <?php foreach($jury as $membre): ?>
    <tr>
        <td> <?php echo $membre["nom"]; ?> </td>
        <td> <?php echo $membre["qualite"]; ?>, <?php echo $membre["rattachement"]; ?> </td>
        <td> <?php echo $membre["role"]; ?> </td>
    </tr>
    <?php endforeach; ?>
</table>


<!-- SECTION ENCADREMENT ---------------------------------------------------------------------------------------------->
<div class='infos-encadrement'>
    Thèse dirigée par
    <?php if ($encadrements["directeurs"] !== null): ?>
        <?php echo $encadrements["directeurs"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> non renseigné </span>
    <?php endif; ?>
,
    <?php if ($encadrements["unite"] !== null): ?>
        <?php echo $encadrements["unite"]; ?>
    <?php else: ?>
        <span style='background-color:red;'> unité de recherche non renseignée </span>
    <?php endif; ?>
</div>

<!-- SECTION DES LOGOS EN BAS DE PAGE --------------------------------------------------------------------------------->
<div class="logos">
<table style="border:none;" class="logos">
    <tr>
        <td>
            <?php if ($logos["etablissement"]): ?>
                <img class="logo_small" src="<?php echo $PATH . $logos["etablissement"]; ?>"/>
            <?php else: ?>
                <span style='background-color:red;'> Établissement d'inscription ou logo d'établissement non renseigné. </span>
            <?php endif; ?>
        </td>
        <!-- TODO COTUTELLE -->
        <td>
            <?php if ($logos["ecole"]): ?>
                <img class="logo_small" src="<?php echo $PATH . $logos["ecole"]; ?>"/>
            <?php else: ?>
                <span style='background-color:red;'> École doctorale ou logo d'école doctorale non renseigné </span>
            <?php endif; ?>
        </td>
        <td>
            <?php if ($logos["unite"]): ?>
                <img class="logo_small" src="<?php echo $PATH . $logos["unite"]; ?>"/>
            <?php else: ?>
                <span style='background-color:red;'> Unité de recherche ou logo d'unité de recherche non renseigné </span>
            <?php endif; ?>
        </td>
    </tr>
</table>
</div>