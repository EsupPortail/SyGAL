<?php

/** @var InformationFichier[] $fichiers */

use Information\Entity\Db\InformationFichier;

$this->headTitle("Fichiers associées aux pages d'information")
?>


<h1 class="page-header">
    Fichiers associées aux pages d'information
</h1>

<a href="<?php echo $this->url("informations/fichiers/ajouter", [], [], true); ?>"
   class="btn btn-primary ajax-modal"
   data-event="modification"
>
    <span class="glyphicon glyphicon-plus"> </span>
    Ajouter un fichier
</a>


<?php if ($fichiers) : ?>
    <?php echo count($fichiers); ?> fichiers déposés.
<?php endif; ?>


<table class="table table-condensed">
    <thead>
    <tr>
        <th>
            Fichier
        </th>
        <th>
            Déposé par
        </th>
        <th>
            Déposé le
        </th>
        <th>
            Actions
        </th>
    </tr>
    </thead>
    <tbody>
    <?php if ($fichiers) : ?>
        <?php foreach ($fichiers as $fichier): ?>
            <tr>
                <td>
                    <a href="<?php
//                            echo "upload/information/" . $fichier->getNom();
                            echo $this->url('informations/fichiers/telecharger', ['id' => $fichier->getId()], [], true);  ?>">
                        <?php echo $fichier->getNom(); ?>
                    </a>
                </td>
                <td>
                    <?php echo $fichier->getCreateur()->getDisplayName(); ?>
                </td>
                <td>
                    <?php echo $fichier->getDateCreation()->format("d/m/Y à h:i"); ?>
                </td>
                <td>
                    <a href="<?php echo $this->url("informations/fichiers/supprimer", ['id' => $fichier->getId()], [], true); ?>">
                        <span class="glyphicon glyphicon-remove"></span>
                    </a>
                </td>
            </tr>
        <?php endforeach; ?>
    <?php endif; ?>
    </tbody>
</table>